<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Ephemeral Void - Gizem</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background-color: #000;
        font-family: "Verdana", sans-serif;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas id="voidCanvas"></canvas>

    <script>
      const canvas = document.getElementById("voidCanvas");
      const ctx = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let particles = [];
      let ripples = [];
      let textParticles = [];
      let hue = 0;

      const mouse = {
        x: canvas.width / 2,
        y: canvas.height / 2,
      };

      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      canvas.addEventListener("mousemove", (event) => {
        mouse.x = event.x;
        mouse.y = event.y;
        for (let i = 0; i < 3; i++) {
          particles.push(new Particle());
        }
      });

      canvas.addEventListener("click", (event) => {
        mouse.x = event.x;
        mouse.y = event.y;
        ripples.push(new Ripple());
      });

      window.addEventListener("keydown", () => {
        createTextParticles();
      });

      class Particle {
        constructor() {
          this.x = mouse.x;
          this.y = mouse.y;
          this.size = Math.random() * 5 + 1;
          this.speedX = Math.random() * 2 - 1;
          this.speedY = Math.random() * 2 - 1;
          this.color = `hsl(${hue}, 100%, 50%)`;
          this.life = 1;
        }
        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          if (this.size > 0.1) this.size -= 0.07;
          this.life -= 0.02;
        }
        draw() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.globalAlpha = this.life;
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      class Ripple {
        constructor() {
          this.x = mouse.x;
          this.y = mouse.y;
          this.radius = 0;
          this.maxRadius = Math.random() * 100 + 50;
          this.life = 1;
          this.color = `hsl(${hue}, 100%, 70%)`;
        }
        update() {
          if (this.radius < this.maxRadius) {
            this.radius += 2;
          }
          this.life -= 0.02;
        }
        draw() {
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.globalAlpha = this.life;
          ctx.stroke();
          ctx.globalAlpha = 1;
        }
      }

      class TextParticle {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.size = 3;
          this.baseX = this.x;
          this.baseY = this.y;
          this.density = Math.random() * 30 + 1;
          this.life = 2; // Live a bit longer
          this.color = `hsl(${Math.random() * 360}, 100%, 75%)`;
        }
        update() {
          let dx = mouse.x - this.x;
          let dy = mouse.y - this.y;
          let distance = Math.sqrt(dx * dx + dy * dy);
          let forceDirectionX = dx / distance;
          let forceDirectionY = dy / distance;
          let maxDistance = 100;
          let force = (maxDistance - distance) / maxDistance;

          if (distance < maxDistance) {
            this.x -= forceDirectionX * force * 3;
            this.y -= forceDirectionY * force * 3;
          } else {
            if (this.x !== this.baseX) {
              let dx = this.x - this.baseX;
              this.x -= dx / 10;
            }
            if (this.y !== this.baseY) {
              let dy = this.y - this.baseY;
              this.y -= dy / 10;
            }
          }
          if (this.life > 0) this.life -= 0.01;
        }
        draw() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.globalAlpha = this.life;
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      function createTextParticles() {
        textParticles = []; // Clear previous text particles
        const text = "gizem";
        const fontSize = 140;
        ctx.font = `bold ${fontSize}px Verdana`;
        ctx.fillStyle = "white";
        const textMetrics = ctx.measureText(text);
        const textWidth = textMetrics.width;
        const textX = (canvas.width - textWidth) / 2;
        const textY = canvas.height / 2 + fontSize / 4;

        ctx.fillText(text, textX, textY);

        const imageData = ctx.getImageData(
          textX,
          textY - fontSize,
          textWidth,
          fontSize * 1.2
        );

        // Clear the drawn text immediately so it's not visible
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let y = 0; y < imageData.height; y++) {
          for (let x = 0; x < imageData.width; x++) {
            if (imageData.data[y * 4 * imageData.width + x * 4 + 3] > 128) {
              if (Math.random() > 0.98) {
                // Only use a fraction of the pixels to look like sparse particles
                textParticles.push(
                  new TextParticle(x + textX, y + textY - fontSize)
                );
              }
            }
          }
        }
      }

      function handleParticles(arr) {
        for (let i = 0; i < arr.length; i++) {
          arr[i].update();
          arr[i].draw();
          if (arr[i].life <= 0) {
            arr.splice(i, 1);
            i--;
          }
        }
      }

      let pulse = 0;
      let pulseDirection = 1;

      function drawCenterDot() {
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const size = 3 + Math.sin(pulse) * 1.5;
        const opacity = 0.5 + Math.sin(pulse) * 0.5;

        ctx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
        ctx.beginPath();
        ctx.arc(centerX, centerY, size, 0, Math.PI * 2);
        ctx.fill();

        pulse += 0.03 * pulseDirection;
        if (pulse > Math.PI) pulseDirection = -1;
        if (pulse < 0) pulseDirection = 1;
      }

      function animate() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (textParticles.length === 0) {
          drawCenterDot();
        }

        handleParticles(particles);
        handleParticles(ripples);
        handleParticles(textParticles);

        hue++;
        requestAnimationFrame(animate);
      }

      animate();
    </script>
  </body>
</html>
